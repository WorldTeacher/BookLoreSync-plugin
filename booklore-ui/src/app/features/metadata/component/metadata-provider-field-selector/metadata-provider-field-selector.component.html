<div class="settings-card">
  <div class="section-header">
    <h3 class="section-title">
      <i class="pi pi-list"></i>
      Enabled Fields in Metadata Editor & Picker
    </h3>
    <p class="section-description">
      Select which metadata fields to display when editing book information or picking metadata from providers. Disabled fields will be hidden from the interface.
    </p>
  </div>

  <div class="section-body">
    <div class="preferences-section">
      <div class="provider-groups-container">
        @for (group of providerGroups; track group.label) {
          <div class="provider-group">
            <div class="group-header">
              <span class="group-icon pi pi-database"></span>
              <h4 class="group-label">{{ group.label }}</h4>
            </div>
            <div class="field-list">
              @for (field of group.fields; track field) {
                <div class="field-checkbox">
                  <p-toggleswitch
                    [inputId]="field"
                    [ngModel]="selectedFields.includes(field)"
                    (ngModelChange)="toggleField(field, $event)">
                  </p-toggleswitch>
                  <label [for]="field">{{ fieldLabels[field] || field }}</label>
                </div>
              }
            </div>
          </div>
        }
      </div>
    </div>
  </div>
</div>
