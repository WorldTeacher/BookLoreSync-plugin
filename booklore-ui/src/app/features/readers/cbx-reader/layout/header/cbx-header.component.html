<div class="cbx-header" [class.visible]="isVisible">
  <div class="header-left">
    <button class="icon-btn" (click)="onOpenSidebar()" title="Contents">
      <app-reader-icon name="menu" [size]="20" />
    </button>
    <button class="icon-btn" (click)="onToggleBookmark()" [title]="isCurrentPageBookmarked ? 'Remove Bookmark' : 'Add Bookmark'" [class.active]="isCurrentPageBookmarked">
      <app-reader-icon name="bookmark" [size]="20" />
    </button>
    <button class="icon-btn" (click)="onOpenNoteDialog()" [title]="currentPageHasNotes ? 'Page has notes - Add another' : 'Add Note'" [class.has-notes]="currentPageHasNotes">
      <app-reader-icon name="note" [size]="20" />
      @if (currentPageHasNotes) {
        <span class="indicator-dot"></span>
      }
    </button>
  </div>
  <span class="book-title">{{ bookTitle }}</span>
  <div class="header-right">
    <button class="icon-btn" (click)="onToggleSlideshow()" [title]="state.isSlideshowActive ? 'Stop Slideshow (P)' : 'Start Slideshow (P)'" [class.active]="state.isSlideshowActive">
      <app-reader-icon [name]="state.isSlideshowActive ? 'pause' : 'play'" [size]="20" />
    </button>
    <button class="icon-btn" (click)="onToggleFullscreen()" [title]="state.isFullscreen ? 'Exit Fullscreen (F)' : 'Fullscreen (F)'">
      <app-reader-icon [name]="state.isFullscreen ? 'fullscreen-exit' : 'fullscreen'" [size]="20" />
    </button>
    <button class="icon-btn" (click)="onShowShortcutsHelp()" title="Keyboard Shortcuts (?)">
      <app-reader-icon name="help" [size]="20" />
    </button>
    <button class="icon-btn" (click)="onOpenSettings()" title="Settings">
      <app-reader-icon name="settings" [size]="20" />
    </button>
    <button class="icon-btn close-btn" (click)="onClose(); $event.stopPropagation()" title="Close Reader">
      <app-reader-icon name="close" [size]="20" />
    </button>
  </div>
</div>
